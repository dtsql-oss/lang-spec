
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation and specification of DTSQL (Declarative Time Series Description Language). Contains a definition of the syntax and semantics of its language concepts as well as meta-information regarding its data model and how to supply data to an DTSQL implementation. ">
      
      
        <meta name="author" content="Raffael Foidl">
      
      
        <link rel="canonical" href="https://example.com/data-structures/data-structures/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Data Structures - DTSQL Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-structures" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DTSQL Documentation" class="md-header__button md-logo" aria-label="DTSQL Documentation" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DTSQL Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data Structures
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch theme"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch theme" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch theme"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch theme" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dtsql-oss/lang-spec" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Getting Started
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../query-language/overview/" class="md-tabs__link">
        Language Specification
      </a>
    </li>
  

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Data Structures
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../query-api/query-api-overview/" class="md-tabs__link">
        Query API
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DTSQL Documentation" class="md-nav__button md-logo" aria-label="DTSQL Documentation" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    DTSQL Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dtsql-oss/lang-spec" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Language Specification
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Language Specification" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Language Specification
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-language/overview/" class="md-nav__link">
        DTSQL Query Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-language/samples/" class="md-nav__link">
        Samples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-language/filters/" class="md-nav__link">
        Filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-language/events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-language/selection/" class="md-nav__link">
        Selection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-language/yield/" class="md-nav__link">
        Yield
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Data Structures
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Data Structures
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-points" class="md-nav__link">
    Data Points
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-series" class="md-nav__link">
    Time Series
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-intervals" class="md-nav__link">
    Time Intervals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-results" class="md-nav__link">
    Query Results
  </a>
  
    <nav class="md-nav" aria-label="Query Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#period" class="md-nav__link">
    Period
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodset" class="md-nav__link">
    PeriodSet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datapointset" class="md-nav__link">
    DataPointSet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalar" class="md-nav__link">
    Scalar
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalarset" class="md-nav__link">
    ScalarSet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Query API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Query API" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Query API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-api/query-api-overview/" class="md-nav__link">
        Query API Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Supported Storage Mechanisms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Supported Storage Mechanisms" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Supported Storage Mechanisms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-api/storage-mechanisms/csv/" class="md-nav__link">
        CSV Storage Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../query-api/storage-mechanisms/influxdb/" class="md-nav__link">
        InfluxDB Storage Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-points" class="md-nav__link">
    Data Points
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-series" class="md-nav__link">
    Time Series
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-intervals" class="md-nav__link">
    Time Intervals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-results" class="md-nav__link">
    Query Results
  </a>
  
    <nav class="md-nav" aria-label="Query Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#period" class="md-nav__link">
    Period
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodset" class="md-nav__link">
    PeriodSet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datapointset" class="md-nav__link">
    DataPointSet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalar" class="md-nav__link">
    Scalar
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalarset" class="md-nav__link">
    ScalarSet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="data-structures">Data Structures<a class="headerlink" href="#data-structures" title="Permanent link">#</a></h1>
<p>This page explains how DTSQL represents different kinds of data it handles.</p>
<h2 id="time">Time<a class="headerlink" href="#time" title="Permanent link">#</a></h2>
<p>Some features provided by DTSQL reference specific points in time (e.g., for local aggregates) or intervals (e.g., for temporal aggregates).
The representation of time is not dictated by DTSQL&rsquo;s grammar and thus, generally, implementation-specific.
However, for the sake of reusing existing standards, it is recommended to utilize the <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO 8601</a> standard<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<p>Furthermore, the implementation must be capable of the following kinds of operations on date/time variables:</p>
<ol>
<li><strong>Extracting components</strong> from a date/time variable, i.e., year, month, day, hour, minute, second, millisecond.</li>
</ol>
<details class="example">
<summary>Example</summary>
<p>Given the ISO 8601 timestamp <code>2022-09-18T16:42:23.254+01:00</code>, the implementation should be able to extract the following components:</p>
<ul>
<li>year: 2022</li>
<li>month: 9</li>
<li>day: 18</li>
<li>hour: 16</li>
<li>minute: 42</li>
<li>second: 23</li>
<li>millisecond: 254</li>
</ul>
<p>In words, this timestamp describes September 18th 2022 at 16:42:23 and 254 milliseconds in a timezone which is one hour ahead of UTC.</p>
</details>
<ol start="2">
<li><strong>Calculating the difference</strong> between two date/time variables in (fractional) weeks, days, hours, minutes, seconds or milliseconds.</li>
</ol>
<details class="example">
<summary>Example</summary>
<p>Given the ISO 8601 timestamps <code>2022-09-18T08:42:23.254Z</code> and <code>2022-09-18T22:42:23.254Z</code>, the unt-dependent time differences are as follows:</p>
<ul>
<li>week: 0,0833</li>
<li>day: 0.5833</li>
<li>hour: 14</li>
<li>minute: 840</li>
<li>second: 50 400</li>
<li>millisecond: 50 400 000</li>
</ul>
<p>Again, the ability to conduct this calculation in a timezone-aware manner (e.g., producing different results for timestamps with non-equal timezone offsets) is not dictated by the DTSQL specification and depends on the implementation.</p>
</details>
<p>The diagrams below visualize the features strictly required of a date/time representation in a DTSQL implementation.</p>
<pre class="mermaid"><code>classDiagram
    class Date {
      +extract(u: TimeUnit) Integer
      +getDuration(d1: Date, d2: Date, u: TimeUnit)$ Real
    }
    class TimeUnit{
      &lt;&lt;enumeration&gt;&gt;
      YEAR
      MONTH
      DAY
      HOUR
      MINUTE
      SECOND
      MILLISECOND
    }</code></pre>
<h2 id="data-points">Data Points<a class="headerlink" href="#data-points" title="Permanent link">#</a></h2>
<p>A data point represents a measurement (&ldquo;sensor log&rdquo;).
It consists of both the time at which it was recorded and the value that was observed.
Additional operations (e.g., formatting the value up to a certain amount of precision or number of significant digits) are valid, but not required.
This is visualized below.</p>
<pre class="mermaid"><code>classDiagram
    class DataPoint {
        +timestamp : Date
        +value : Real
    }</code></pre>
<h2 id="time-series">Time Series<a class="headerlink" href="#time-series" title="Permanent link">#</a></h2>
<p>Time series are made up of several measurements, i.e., data points.
Their <em>size</em> or <em>length</em> is equal to the number of data points they comprise.
It is also possible to retrieve a subset of a time series from an <a href="#time-intervals">interval</a>.
The diagram below illustrates the structure of time series.</p>
<pre class="mermaid"><code>classDiagram
    class TimeSeries {
        +dataPoints: DataPoint[]
        +getSize()  Integer
        +get(idx: Integer) DataPoint
        +getSubSeries(pd: Period) TimeSeries
    }</code></pre>
<p>DTSQL stipulates two important assumptions about time series and their data points:</p>
<details class="warning">
<summary>Warning: Assumptions About Time Series</summary>
<p>The two assumptions below greatly facilitate designing algorithms for query evaluation modules.
DTSQL implementations are <strong>not</strong> expected to ensure or verify them, they rather serve as preconditions of the input data.</p>
<ol>
<li>Time series are in ascending order with respect to the time component of their data points.</li>
<li>Data points in a time series are unique with respect to their time component (i.e., there are no two data points with the same time component).</li>
</ol>
<p>This implies that the data points of a time series are strictly monotonically increasing with respect to their time components.</p>
</details>
<h2 id="time-intervals">Time Intervals<a class="headerlink" href="#time-intervals" title="Permanent link">#</a></h2>
<p>A time interval, interval, or period is a segment of time that is defined by a lower bound and upper bound.
It may be used to capture a subset of a time series.
Since one of DTSQL&rsquo;s core features is the detection of periods of interest, they may be equipped with an index that denotes their position in the sequence of detected periods.
This is summarized in the image below.</p>
<pre class="mermaid"><code>classDiagram
    class Period {
        +start : Date
        +end : Date
        +index : Integer
        +getLength(u: TimeUnit) TimeUnit
        +contains(dp: DataPoint) Boolean
    }</code></pre>
<h2 id="query-results">Query Results<a class="headerlink" href="#query-results" title="Permanent link">#</a></h2>
<pre class="mermaid"><code>classDiagram
    class QueryResult
    &lt;&lt;interface&gt;&gt; QueryResult
    QueryResult &lt;|-- Period
    QueryResult &lt;|-- PeriodSet
    QueryResult &lt;|-- DataPointSet
    QueryResult &lt;|-- Scalar
    QueryResult &lt;|-- ScalarSet</code></pre>
<p>Depending on the <a href="../../query-language/yield/">Yield Component</a> of a DTSQL query, the result may take different shapes.
The paragraphs below explain the composition of the result formats supported by DTSQL.</p>
<h3 id="period">Period<a class="headerlink" href="#period" title="Permanent link">#</a></h3>
<p>In case a single period is returned (e.g., the longest of all detected periods), the query result is an instance of the <code>Period</code> type introduced in <a href="#time-intervals">Time Intervals</a>.</p>
<h3 id="periodset">PeriodSet<a class="headerlink" href="#periodset" title="Permanent link">#</a></h3>
<p>If the result (potentially) comprises more than one period, then an instance of <code>PeriodSet</code>, as illustrated below, is returned.</p>
<pre class="mermaid"><code>classDiagram
    class PeriodSet {
      +periods : Period[]
      +getLength() Integer
      +isEmpty() Boolean
      +get(idx: Integer) Period
    }</code></pre>
<h3 id="datapointset">DataPointSet<a class="headerlink" href="#datapointset" title="Permanent link">#</a></h3>
<p>For instances when all data points are returned (either after filtering or contained by a detected period), then an object of <code>DataPointSet</code> is returned.
This data structure is very similar to <a href="#periodset">PeriodSet</a>, as the diagram below shows.</p>
<pre class="mermaid"><code>classDiagram
    class DataPointSet {
      +periods : DataPoint[]
      +getLength() Integer
      +isEmpty() Boolean
      +get(idx: Integer) DataPoint
    }</code></pre>
<h3 id="scalar">Scalar<a class="headerlink" href="#scalar" title="Permanent link">#</a></h3>
<p>DTSQL may return the calculated values of samples.
The <code>Scalar</code> wrapper type below encapsulates these concrete aggregate values.</p>
<pre class="mermaid"><code>classDiagram
    class Scalar {
      +value : Real
    }</code></pre>
<h3 id="scalarset">ScalarSet<a class="headerlink" href="#scalarset" title="Permanent link">#</a></h3>
<p>The <code>ScalarSet</code> structure displayed below is equivalent to <a href="#scalar">Scalar</a> for the case of results consisting of multiple scalar values.</p>
<pre class="mermaid"><code>classDiagram
    class ScalarSet {
      +values : Real[]
    }</code></pre>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>ISO 8601 offers a wide array of possibilities to express date and time-related data.
It is completely up to the specific DTSQL implementation to what extent these capabilities are supported (e.g., unix timestamps, week with weekday notation, time zones, ordinal dates, etc.).&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../query-language/yield/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Yield" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Yield
            </div>
          </div>
        </a>
      
      
        
        <a href="../../query-api/query-api-overview/" class="md-footer__link md-footer__link--next" aria-label="Next: Query API Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Query API Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 Raffael Foidl
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/dtsql-oss/lang-spec" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.078830c0.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../js/tablesort.js"></script>
      
    
  </body>
</html>